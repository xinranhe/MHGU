<!DOCTYPE html>
<html>
<head>
<style>
table, th, td {
  border: 1px solid black;
}
</style>
</head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script>
	$(document).ready(function(){
		activated_skills = ['攻击力UP【大】', '攻击力UP【中】', '攻击力UP【小】', '绝境求生', '英雄守护', '耐力夺取', '冰属性攻击强化+2', '冰属性攻击强化+1', '不屈', '拔刀术【力】', '水属性攻击强化+2', '水属性攻击强化+1', '集中', '属性攻击强化', '会心击【特殊】', '炮术王', '炮术师', '雷属性攻击强化+2', '雷属性攻击强化+1', '龙属性攻击强化+2', '龙属性攻击强化+1', '会心击【属性】', '火属性攻击强化+2', '火属性攻击强化+1', '连击的心得', '弱点特效', '防御力UP【大】', '防御力UP【中】', '防御力UP【小】', '精灵加护', '挑战者的纳刀', '钝器使用', '力量解放+2', '力量解放+1', '爆弹人', '最爱吃肉', '刃鳞研磨', '虎视眈眈', '超会心', '刚刃研磨', '根性', '飞人', '状态异常攻击+2', '状态异常攻击+1', '利刃', '纳刀术', 'ＳＰ时间延长', '持续奔跑', '饥不择食', '饱食', '速食者+2', '速食者+1', '火事场力+2', '火事场力+1', '心眼', '耐力急速回复', '龙气活性', '洞悉+3', '洞悉+2', '洞悉+1', '拔刀术【技】', '破坏王', '挑战者+2', '挑战者+1', '体力+50', '体力+20', '饥饿感无效', '饥饿感减半', '泡沫之舞', '明镜止水', '防御强化', '痛恨会心', '骑乘名人', '体术+2', '体术+1', '最爱蘑菇', '锋利度等级+2', '锋利度等级+1', '全蓄力', '仇恨', '回避距离UP', '防御性能+2', '防御性能+1', 'KO术', '飞燕', '回避性能+2', '回避性能+1', '王牌', '无我的境地', '装填数UP', '蜂蜜猎人', '毒耐性', '麻痹瓶追加', '水耐性【大】', '水耐性【小】', '体力回复量UP', '雷耐性【大】', '雷耐性【小】', '火耐性【大】', '火耐性【小】', '铁面皮', '风压【大】无效', '风压【小】无效', '接击瓶追加', '南风的狩人', '满足感', '雪人无效', '穿甲榴弹全LV追加', '穿甲榴弹LV1追加', '护石系統倍加', '炎热无效', '灭气瓶追加', '裂伤无效', '剥取名人', '剥取铁人', '搬运达人', '耐震', '冰耐性【大】', '冰耐性【小】', '生物博士', '细菌研究家', '贯通弹全LV追加', '贯通弹LV1追加', '偷盗无效', '通常弹・连射箭UP', '散弹全LV追加', '散弹LV1追加', '强击瓶全LV追加', '强击瓶LV1追加', '装填速度+3', '装填速度+2', '装填速度+1', '弹药节约', '神之气息', '精灵之气息', '扩散弹全LV追加', '扩散弹LV1追加', '弹导强化', '最大数生产', '回复速度+2', '回复速度+1', '广域化+2', '广域化+1', '属强瓶全LV追加', '属强瓶LV1追加', '毒瓶追加', '龙耐性【大】', '龙耐性【小】', '连发数+1', '护符猎人', '护符收藏家', '北风的狩人', '道具使用强化', '特定射击强化', '睡眠瓶追加', '爆破瓶追加', '激运', '强运', '幸运', '药草超强化', '药草强化', '高级耳栓', '耳栓', '反动减轻+3', '反动减轻+2', '反动减轻+1', '属性异常无效', '寒冷无效', '贯通弹・贯通箭UP', '重击弹・重射矢UP', '麻痹无效', '睡眠无效', '晕眩无效', '晕眩概率减半', '通常弹全LV追加', '散弹・扩散箭UP', '摇晃减轻+2', '摇晃减轻+1', '捕获名人', '捕获达人', '采集+2', '采集+1', '无慈悲', '贝尔纳之心', '天眼之魂', '银岭之魂', '真・岩穿之魂', '真・铠裂之魂', '隐秘', '捕获的极致', '猎人生活', '逆鳞', '属物强化', '钢壳守护', '真・红兜之魂', '陷阱师', '铁壁', '真・金雷公之魂', '陷阱大师', '红兜之魂', '荒钩爪之魂', '痛打', '关心随从猫', '轻业师', '大雪主之魂', '真・矛碎之魂', '真・白疾风之魂', '砥石使用高速化', '技能加点+2', '纳豆剑法', '刚弹', '金雷公之魂', '真・黑炎王之魂', '真・银岭之魂', '命令随从猫', '波克之心', '紫毒姬之魂', '胧隐之魂', '真・紫毒姬之魂', '护法', '盾派师', '护符爱好者', '霞皮守护', '龙识船之心', '矛碎之魂', '青电主之魂', '鏖魔之魂', '美食', '祝福', '吹笛名人', '炎鳞守护', '宝缠之魂', '真・青电主之魂', '真打', '真・烬灭刃之魂', '居合术【力】', '真・大雪主之魂', '真・荒钩爪之魂', '真・天眼之魂', '真・鏖魔之魂', '心剑一体', '自动标记', '探知', '调和成功率+45%', '调和成功率+20%', '飞行酒馆之心', '独眼之魂', '科科特之心', '白疾风之魂', '烬灭刃之魂', '真・胧隐之魂', '结云之心', '岩穿之魂', '黑炎王之魂', '真・宝缠之魂', '真・独眼之魂', '秘密策划', '增收', '铠裂之魂']
		$.each(activated_skills, function (i, as) {
		      $('#skill1').append($('<option>', { 
		          value: as,
		          text : as 
		      }));
		      $('#skill2').append($('<option>', { 
		          value: as,
		          text : as 
		      }));
		      $('#skill3').append($('<option>', { 
		          value: as,
		          text : as 
		      }));
		      $('#skill4').append($('<option>', { 
		          value: as,
		          text : as 
		      }));
		      $('#skill5').append($('<option>', { 
		          value: as,
		          text : as 
		      }));
		      $('#skill6').append($('<option>', { 
		          value: as,
		          text : as 
		      }));		      		      		      		      		      
		  });
		skills = ['攻击', '穷地', '英雄之盾', '灭气攻击', '冰属性攻击', '逆境', '拔刀灭气', '水属性攻击', '蓄力缩短', '属性攻击', '特殊会心', '炮术', '雷属性攻击', '龙属性攻击', '属性会心', '火属性攻击', '连击', '痛击', '防御', '守护', '纳刀研磨', '钝器', '认真', '爆弹强化', '肉食', '刃鳞', '忍耐', '会心強化', '研磨术', '根性', '耐力', '特殊攻击', '锋利度', '收刀', 'ＳＰ延长', '持续行走', '大胃王', '进食', '底力', '剑术', '气力回复', '龙气', '达人', '拔刀会心', '重击', '斗魂', '体力', '饥饿感', '泡沫', '无心', '防御强化', '里会心', '骑乘', '体术', '茸食', '匠', '无伤', '逆上', '回避距离', '防御性能', 'KO', '跳跃', '回避性能', '机会', '狂击耐性', '装填数', '蜂蜜', '毒', '麻痹瓶追加', '水耐性', '回复量', '雷耐性', '火耐性', '对防御DOWN', '风压', '接击瓶追加', '炎热适应', '节食', '雪人', '榴弹追加', '护石强化', '耐暑', '灭气瓶追加', '裂伤', '剥取', '搬运', '耐震', '冰耐性', '细菌学', '贯通弹追加', '偷盗无效', '通常弹强化', '散弹追加', '强击瓶追加', '装填速度', '弹药节约', '反复无常', '扩散弹追加', '射法', '调合数', '回复速度', '广域', '属强瓶追加', '毒瓶追加', '龙耐性', '速射', '护石王', '寒冷适应', '效果持续', '变则射击', '睡眠瓶追加', '爆破瓶追加', '运气', '野草知识', '听觉保护', '反动', '属性耐性', '耐寒', '贯通弹强化', '重击弹强化', '麻痹', '睡眠', '晕眩', '通常弹追加', '散弹强化', '精密射击', '捕获', '采集', '刚击', '贝尔纳', '天眼', '银岭', '真・岩穿', '真・铠裂', '警惕', '观察眼', '猎人', '怒', '增幅', '对炎龙', '真・红兜', '高速设置', '顽强', '真・金雷公', '职工', '红兜', '荒钩爪', '刚腕', '采配', '回避术', '大雪主', '真・矛碎', '真・白疾风', '研磨师', '秘术', '胴系统加倍', '北辰纳豆流', '射手', '金雷公', '真・黑炎王', '真・银岭', '号令', '洁癖', '波克', '紫毒姫', '胧隐', '真・紫毒姫', '状态耐性', '盾持', '护石收集', '对钢龙', '龙识船', '矛砕', '青电主', '鏖魔', '食欲', '祈愿', '笛', '对霞龙', '宝缠', '真・青电主', '刀匠', '真・烬灭刃', '居合', '真・大雪主', '真・荒钩爪', '真・天眼', '真・鏖魔', '斩术', '千里眼', '调合成功率', '飞行酒馆', '独眼', '科科特', '白疾风', '烬灭刃', '真・胧隐', '结云', '岩穿', '黑炎王', '真・宝缠', '真・独眼', '暗地工作', '强欲', '铠裂']
		$.each(skills, function (i, s) {
		      $('#stone_skill1').append($('<option>', { 
		          value: s,
		          text : s 
		      }));
		      $('#stone_skill2').append($('<option>', { 
		          value: s,
		          text : s 
		      }));	      		      		      		      		      
		  });		
	})
	function submit() {
		request = {}
		if ($('#range').is(':checked')) {
			request["is_gunner"] = 1
		} else {
			request["is_gunner"] = 0
		}
		required_activations = []
		if ($('#skill1').val() != "") required_activations.push($('#skill1').val())
		if ($('#skill2').val() != "") required_activations.push($('#skill2').val())
		if ($('#skill3').val() != "") required_activations.push($('#skill3').val())
		if ($('#skill4').val() != "") required_activations.push($('#skill4').val())
		if ($('#skill5').val() != "") required_activations.push($('#skill5').val())
		if ($('#skill6').val() != "") required_activations.push($('#skill6').val())
		request["required_activated_skills"] = required_activations

		stone_skills = {}
		if ($('#stone_skill1').val() != "" && parseInt($('#stone_skill1_point').val()) > 0) {
			stone_skills[$('#stone_skill1').val()] = parseInt($('#stone_skill1_point').val())
		}
		if ($('#stone_skill2').val() != "" && parseInt($('#stone_skill2_point').val()) > 0) {
			stone_skills[$('#stone_skill2').val()] = parseInt($('#stone_skill2_point').val())
		}
		request["stone_skills"] = stone_skills
		
		request["stone_hole"] = parseInt($('#stone_slots').val())
		request["weapon_hole"] = parseInt($('#weapon_slots').val())
		$.post("/search", {"request": JSON.stringify(request)},
		  function(data, status){
		  	results = JSON.parse(data)["results"]
		  	html_string = '<table style="width:100%">'
		  	html_string += "<tr><th>总防御力</th><th>头</th><th>腕</th><th>胸</th><th>腰</th><th>脚</th><th>装饰品</th></tr>"
		  	for (i = 0; i < results.length; i++) {
		  		html_string += "<tr>"
		  		
		  		html_string += "<th>"
		  		html_string += results[i]["total_def"]
		  		html_string += "</th>"

		  		equipments = results[i]["equipments"]
		  		for (j = 0; j < 5; j++) {
		  			html_string += "<th>"
		  			html_string += equipments[j]
		  			html_string += "</th>"
		  		}
		  		
		  		html_string += "<th>"
		  		if (results[i]["gems"].length > 0) {
					html_string += results[i]["gems"]
		  		} else {
		  			html_string += "无装饰品"
		  		}
		  		html_string += "</th>"

		  		html_string += "</tr>"
		  	}
		  	html_string += '</table>'
		  	$("#result").html(html_string)
		  });
	}
</script>
<body>

<h1>MHGU/XX 配装器</h1>
<p>近战/远程</p>
<form action="">
  <input id="melee" type="radio" name="type" value="0"> 近战<br>
  <input id="range" type="radio" name="type" value="1" checked="checked"> 远程<br>
</form>
<p>选择需要的技能:</p>
<label>技能1:</label>
<select id="skill1">
	<option value="">-------------------------------------</option>
</select>
<br>
<label>技能2:</label>
<select id="skill2">
	<option value="">-------------------------------------</option>
</select>
<br>
<label>技能3:</label>
<select id="skill3">
	<option value="">-------------------------------------</option>
</select>
<br>
<label>技能4:</label>
<select id="skill4">
	<option value="">-------------------------------------</option>
</select>
<br>
<label>技能5:</label>
<select id="skill5">
	<option value="">-------------------------------------</option>
</select>
<br>
<label>技能6:</label>
<select id="skill6">
	<option value="">-------------------------------------</option>
</select>
<p>输入持有的护石:</p>
<label>技能1:</label>
<select id="stone_skill1">
	<option value="">-------------------------------------</option>
</select>
&nbsp;&nbsp;&nbsp;&nbsp;<label>点数:</label><input type="text" id="stone_skill1_point" value="0">
<br>
<label>技能2:</label>
<select id="stone_skill2">
	<option value="">-------------------------------------</option>
</select>
&nbsp;&nbsp;&nbsp;&nbsp;<label>点数:</label><input type="text" id="stone_skill2_point" value="0">
<br>
<label>护石孔数:</label><input type="text" id="stone_slots" value="0">
<p>武器信息:</p>
<label>武器孔数:</label><input type="text" id="weapon_slots" value="0">
<br><br><br>
<button onclick="submit()">搜索配装</button>
<hr> 
<div id="result"></div>
</body>
</html>
